{% extends "base.html" %}

{% block title %}Change Password - VAPA Order System{% endblock %}

{% block content %}
<h2>üîí Change Password</h2>

<div class="form-container">
    <p><strong>Logged in as:</strong> {{ session.full_name }} ({{ session.username }})</p>
    
    <form method="POST" action="{{ url_for('change_password') }}" id="passwordForm">
        <div class="form-group">
            <label for="current_password">Current Password *</label>
            <input type="password" id="current_password" name="current_password" class="form-control" required autofocus>
        </div>
        
        <div class="form-group">
            <label for="new_password">New Password *</label>
            <input type="password" id="new_password" name="new_password" class="form-control" required minlength="6">
            <small>Minimum 6 characters</small>
        </div>
        
        <div class="form-group">
            <label for="confirm_password">Confirm New Password *</label>
            <input type="password" id="confirm_password" name="confirm_password" class="form-control" required minlength="6">
            <small>Must match new password</small>
        </div>
        
        <div class="button-group">
            <button type="submit" class="btn btn-primary">üíæ Change Password</button>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<div class="section">
    <h3>‚ÑπÔ∏è Password Requirements</h3>
    <div class="info-box">
        <ul>
            <li>Minimum 6 characters</li>
            <li>Use a strong, unique password</li>
            <li>Don't share your password with anyone</li>
            <li>Consider using a password manager</li>
        </ul>
    </div>
</div>

<div class="back-link">
    <a href="{{ url_for('dashboard') }}">&larr; Back to Dashboard</a>
</div>

<style>
.info-box {
    background: #fff3cd;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #ffc107;
}

.info-box ul {
    margin: 0.5rem 0;
    padding-left: 1.5rem;
}

.info-box li {
    margin: 0.5rem 0;
}
</style>

<script>
document.getElementById('passwordForm').addEventListener('submit', function(e) {
    const newPassword = document.getElementById('new_password').value;
    const confirmPassword = document.getElementById('confirm_password').value;
    
    if (newPassword !== confirmPassword) {
        e.preventDefault();
        alert('New password and confirmation do not match!');
        return false;
    }
});
</script>
{% endblock %}
